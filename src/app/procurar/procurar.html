<div class="layout">
  <app-menu></app-menu>
  <main class="main">
    <div class="searchbar">
      <span>üîé</span>
      <input [(ngModel)]="termo" name="q" placeholder="Procurar" (ngModelChange)="pesquisar()" (keyup.enter)="pesquisar()">
    </div>

    <h3 class="mt-16">Descubra</h3>
    <div class="chips row-scroll">
      @for (t of tags; track $index) { <span class="chip">{{ t }}</span> }
      <a class="chip" routerLink="/procurar/lista">Ver tudo</a>
    </div>

    <div class="mt-16">
      <div class="title-row" style="display:flex;align-items:center">
        <h3>Sugest√µes</h3><a style="margin-left:auto">More</a>
      </div>
      <div class="row-scroll">
        @for (s of sugestoes; track $index) {
          <article class="s-card">
            <img [src]="s.img" alt="">
            <div class="meta">{{ s.meta }}</div>
            <b>{{ s.titulo }} ‚≠ê</b>
          </article>
        }
      </div>
    </div>

    @if (termo.trim()) {
      <div class="mt-16">
        <div class="title-row" style="display:flex;align-items:center">
          <h3>Resultados</h3>
          @if (loading) { <small class="muted" style="margin-left:8px">buscando...</small> }
        </div>
        @if (!loading && !resultados.length) {
          <p class="muted">Nenhum resultado para "{{ termo }}".</p>
        } @else {
          <div class="row-scroll">
            @for (r of resultados; track $index) {
              <article class="s-card">
                <img [src]="r.img" alt="">
                <div class="meta">{{ r.meta }}</div>
                <b>{{ r.titulo }}</b>
              </article>
            }
          </div>
        }
      </div>
    }
  </main>
</div>

