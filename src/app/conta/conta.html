<div class="layout">
  <app-menu></app-menu>
  <main class="main">
    <div class="card" style="padding:16px;max-width:860px">
      <header class="acc-h">
        <img [src]="usuario.foto" class="avatar-lg" alt="Foto de perfil" onerror="this.onerror=null;this.src='conta.jpeg'">
        <div class="grow">
          <nav class="tabs">
            <a class="active">Minha conta</a>
            <a>Adicionar conta</a>
          </nav>
        </div>
        <button class="chip">Sair</button>
      </header>

      <section class="acc-body">
        <div class="meta">
          <b>{{ usuario.amigos }}</b> Amigos
          <b>{{ usuario.posts }}</b> Sem posts ainda
          <label class="chip" style="margin-left:auto; cursor:pointer">
            Upload üì§
            <input type="file" hidden (change)="trocarFoto($event.target)" />
          </label>
        </div>

        @if (!editando) {
          <h2 style="margin-top:6px">{{ usuario.nome }}</h2>
          <p class="muted">Anivers√°rio: {{ usuario.aniversario }}</p>
          <p class="muted">{{ usuario.status || 'Sem status' }}</p>
          <div class="actions">
            <button class="chip" (click)="editando = true">‚úèÔ∏è Editar perfil</button>
          </div>
        } @else {
          <div class="form">
            <label>Nome</label>
            <input [(ngModel)]="usuario.nome" placeholder="Seu nome" />
            <label>Status</label>
            <input [(ngModel)]="usuario.status" placeholder="Escreva um status" />
            <div class="actions">
              <button class="chip" (click)="editando = false">Cancelar</button>
              <button class="chip" (click)="salvar()">Salvar</button>
            </div>
          </div>
        }

        <div class="mt-16">
          <h3>Seus posts ({{ usuario.posts }})</h3>
          @if (!seusPosts.length) {
            <p class="muted">Voc√™ ainda n√£o publicou nada.</p>
          } @else {
            <div class="grid-posts">
              @for (p of seusPosts; track $index) {
                <figure class="post-thumb">
                  <img [src]="p.img" alt="post" />
                  <figcaption>
                    <small>{{ p.tag }}</small>
                    <b>{{ p.likes || 0 }} curtidas</b>
                  </figcaption>
                </figure>
              }
            </div>
          }
        </div>
      </section>
    </div>
  </main>
</div>
