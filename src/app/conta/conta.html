<div class="layout">
  <app-menu></app-menu>
  <main class="main">
    <div class="card" style="padding:16px;max-width:860px">
      <header class="acc-h">
        <img
          [src]="usuario.foto"
          class="avatar-lg"
          alt="Foto de perfil"
          onerror="this.onerror=null;this.src='conta.jpeg'"
        />
        <div class="grow">
          <nav class="tabs">
            <a class="active">Minha conta</a>
            <a>Adicionar conta</a>
          </nav>
        </div>
        <button
          class="chip"
          type="button"
          (click)="sair()"
        >
          Sair
        </button>
      </header>

      <section class="acc-body">
        <div class="acc-main">
          <div class="acc-row">
            <div>
              <p class="muted">Amigos</p>
              <p class="big">{{ usuario.amigos }}</p>
            </div>
            <div>
              <p class="muted">Posts</p>
              <p class="big">{{ usuario.posts }}</p>
            </div>
          </div>

          @if (!editando) {
            <h2 style="margin-top:6px">{{ usuario.nome }}</h2>
            <p class="muted">Aniversário: {{ usuario.aniversario }}</p>
            <p class="muted">
              {{ usuario.status || 'Sem status' }}
            </p>
            <div class="actions">
              <button class="chip" (click)="editando = true">
                ✏️ Editar perfil
              </button>
            </div>
          } @else {
            <div class="form">
              <label>Nome</label>
              <input [(ngModel)]="usuario.nome" placeholder="Seu nome" />
              <label>Status</label>
              <input
                [(ngModel)]="usuario.status"
                placeholder="Escreva um status"
              />
              <div class="actions">
                <button class="chip" (click)="editando = false">
                  Cancelar
                </button>
                <button class="chip" (click)="salvar()">
                  Salvar
                </button>
              </div>
            </div>
          }

          <div class="mt-16">
            <h3>Seus posts ({{ usuario.posts }})</h3>
            @if (!seusPosts.length) {
              <p class="muted">Você ainda não publicou nada.</p>
            } @else {
              <div class="grid-posts">
                <figure
                  class="post"
                  *ngFor="let p of seusPosts"
                >
                  <img [src]="p.img" [alt]="p.tag" />
                  <figcaption>
                    <strong>@{{ p.autor }}</strong>
                    <span>{{ p.tag }}</span>
                    <span>❤️ {{ p.likes }}</span>
                  </figcaption>
                </figure>
              </div>
            }
          </div>
        </div>
      </section>
    </div>
  </main>
</div>
